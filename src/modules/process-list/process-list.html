<template>
  <require from="./process-list.css"></require>
  <div>
    <div class="menu-bar menu-bar--system-macos">
      <div class="menu-bar__menu menu-bar__menu--left">
        <div class="menu__menu-tabbed-link">
          <a class="menu-tabbed-link" href="#">
            <i class="fa fa-folder"></i>
          </a>
        </div>
        <div class="menu__menu-tabbed-link">
          <a class="menu-tabbed-link" href="#">Processes</a>
        </div>
        <div class="menu__menu-tabbed-link">
          <a class="menu-tabbed-link menu-tabbed-link--disabled">Design</a>
        </div>
        <div class="menu__menu-tabbed-link">
          <a class="menu-tabbed-link menu-tabbed-link--disabled">Publish</a>
        </div>

        <div class="btn-group">
          <div class="menu__menu-tabbed-link menu__menu-tabbed-link--active" data-toggle="dropdown">
            <a class="menu-tabbed-link">Dashboard</a>
          </div>
          <ul class="dropdown-menu menu-bar__dashboard-dropdown">
            <li>
              <a href="#/task">Task List</a>
            </li>
            <li>
              <a href="#/process">Process Instance List</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="menu-bar__menu menu-bar__menu--center"></div>

      <div class="menu-bar__menu menu-bar__menu--right">
        <user-login></user-login>
      </div>
    </div>

    <div class="container process-list-container">
      <div if.bind="instances && instances.length > 0">
        <table class="table table-striped table-bordered">
          <tr>
            <th>ProcessDefinitionName</th>
            <th>ProcessDefinitionKey</th>
            <th>ProcessInstanceId</th>
            <th>
              State
              <select ref="selectedState" change.delegate="updateList()">
                <option value="all">all</option>
                <option repeat.for="state of status" value="${state}">${state}</option>
              </select>
            </th>
          </tr>
          <tr repeat.for="instance of shownProcesses">
            <td><a href="#/processdef/${instance.processDef.id}/detail">${instance.processDef.name}</a></td>
            <td>${instance.key}</td>
            <td>${instance.id}</td>
            <td><a href="#/process/${instance.id}/task">${instance.status}</a></td>
          </tr>
        </table>
      </div>
      <div class="col-md-12 col-xs-12 pagination" show.bind="instances && instances.length > 0">
        <aubs-pagination page-size.bind="pageSize" total-items.bind="totalItems" current-page.bind="currentPage"
          boundary-links.bind="true">
        </aubs-pagination>
      </div>
      <div if.bind="succesfullRequested && (!instances || instances.length === 0)">
        <h3>No process instances found</h3>
      </div>
    </div>
    <div show.bind="!succesfullRequested" class="container">
      <img src="src/resources/images/gears.svg" class="loading-spinner">
    </div>
  </div>
</template>
