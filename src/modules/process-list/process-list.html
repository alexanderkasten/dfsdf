<template>
  <require from="./process-list.css"></require>
  <div class="container">
    <div if.bind="instances && instances.length > 0">
      <table class="table table-striped table-bordered">
        <tr>
          <th>ProcessDefinitionName</th>
          <th>ProcessDefinitionKey</th>
          <th>ProcessInstanceId</th>
          <th>
            State
            <select ref="selectedState" change.delegate="updateList()">
              <option value="all">all</option>
              <option repeat.for="state of status" value="${state}">${state}</option>
            </select>
          </th>
        </tr>
        <tr repeat.for="instance of shownProcesses">
          <td><a href="#/processdef/${instance.processDef.id}/detail">${instance.processDef.name}</a></td>
          <td>${instance.key}</td>
          <td>${instance.id}</td>
          <td><a href="#/process/${instance.id}/task">${instance.status}</a></td>
        </tr>
      </table>
    </div>
    <div class="col-md-12 pagination" show.bind="instances && instances.length > 0">
      <aubs-pagination page-size.bind="pageSize" total-items.bind="totalItems" current-page.bind="currentPage"
        boundary-links.bind="true">
      </aubs-pagination>
    </div>
    <div if.bind="succesfullRequested && (!instances || instances.length === 0)">
      <h3>No process instances found</h3>
    </div>
  </div>
  <div show.bind="!succesfullRequested" class="container">
    <div class="loading-spinner">
      <img src="src/resources/images/gears.svg">
    </div>
  </div>
</template>
