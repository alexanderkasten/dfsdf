<template>
  <require from="../bpmn-io/bpmn-io"></require>
  <require from="./processdef-detail.css"></require>
  <require from="spectrum-colorpicker/spectrum.css"></require>
  <require from="../property-panel/property-panel"></require>
  <require from="../user-login/user-login"></require>
  <require from="../process-solution-panel/process-solution-panel"></require>
  <div class="process-def-detail">
  <!--
    MENU BAR
  -->
  <div class="menu-bar menu-bar--system-macos">
    <div class="menu-bar__menu menu-bar__menu--left">
      <div class="menu__menu-tabbed-link">
        <a class="menu-tabbed-link menu-bar__menu-left--options" href="#/configuration">
          <i class="fa fa-cog"></i>
        </a>
      </div>
      <div class="menu__menu-tabbed-link">
        <button class="menu-tabbed-link menu-bar__menu-center--action-button" class.bind="solutionExplorerIsShown ? 'solution-explorer__active' : ''" click.delegate="toggleSolutionExplorer()">
          <i class="fa fa-folder"></i>
        </button>
      </div>
      <div class="menu__menu-tabbed-link">
        <a class="menu-tabbed-link" href="#">Plan</a>
      </div>
      <div class="menu__menu-tabbed-link menu__menu-tabbed-link--active">
        <a class="menu-tabbed-link">Design</a>
      </div>
      <div class="menu__menu-tabbed-link">
        <a class="menu-tabbed-link menu-tabbed-link--disabled">Publish</a>
      </div>
      <div class="btn-group">
        <div class="menu__menu-tabbed-link" data-toggle="dropdown">
          <a class="menu-tabbed-link">Dashboard</a>
        </div>
        <ul class="dropdown-menu menu-bar__dashboard-dropdown">
          <li>
            <a href="#/processdef/${process.id}/task">Task List</a>
          </li>
          <li>
            <a href="#/processdef/${process.id}/process">Process Instance List</a>
          </li>
        </ul>
      </div>
      <div class="menu-bar__menu-action-link">
        <button class="menu-bar__menu-center--action-button menu-bar__menu-center--back-button back-button" click.delegate="goBack()" title="Navigate back">
          <i class="fa fa-arrow-circle-left"></i>
        </button>
      </div>
      <div class="menu-bar__menu-action-link">
        <button class="menu-bar__menu-center--action-button" ref="saveButton" click.delegate="saveDiagram()" disabled.bind="validationError" title="Save Diagram">
          <i class="fa fa-save"></i>
        </button>
      </div>
      <div class="menu-bar__menu-action-link btn-group">
        <button class="menu-bar__menu-center--action-button dropdown-toggle" title="Export Diagram" ref="exportButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i ref="exportIcon" class="fa fa-upload"></i>
          <i ref="exportSpinner" class="glyphicon glyphicon-repeat fa-spin hidden"></i>
        </button>
        <ul class="dropdown-menu">
          <li><a href="#" click.delegate="exportBPMN()">as BPMN</a></li>
          <li><a href="#" click.delegate="exportSVG()">as SVG</a></li>
          <li><a href="#" click.delegate="exportPNG()">as PNG</a></li>
          <li><a href="#" click.delegate="exportJPEG()">as JPEG</a></li>
        </ul>
      </div>
      <div class="menu-bar__menu-action-link">
        <button class="menu-bar__menu-center--action-button" ref="startButton" click.delegate="startProcess()" disabled.bind="validationError" title="Start Process">
          <i class="fa fa-play"></i>
        </button>
      </div>
    </div>
    <div class="menu-bar__menu menu-bar__menu--center">
      <div class="menu__element menu__element--title btn-group">
        <span>${process.name}</span>
        <button class="menu-bar__menu-center--action-button dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fa fa-angle-down"></i>
        </button>
        <table class="dropdown-menu process-details-dropdown-menu">
          <tr>
            <th>Process Id: </th>
            <td>${process.id}</td>
          </tr>
          <tr>
            <th>Process Name: </th>
            <td>${process.name}</td>
          </tr>
          <tr>
            <th>Process Key: </th>
            <td>${process.key}</td>
          </tr>
        </table>
      </div>
    </div>
    <div class="menu-bar__menu menu-bar__menu--right">
      <user-login></user-login>
    </div>
  </div>
  <process-solution-panel show.bind="solutionExplorerIsShown"></process-solution-panel>

  <div class="bpmnio-container">
    <bpmn-io view-model.ref="bpmn" xml.bind="process.xml"></bpmn-io>
  </div>
  <!--
  STATUS BAR
  -->
  <div class="status-bar status-bar--system-macos">
    <div class="status-bar__left-bar">
      <a class="status-bar__element status-bar__element--config-link" href="#/configuration">
        <span>Connected to: ${environment.bpmnStudioClient.baseRoute}</span>
      </a>
    </div>
    <div class="status-bar__center-bar"></div>
    <div class="status-bar__right-bar">
      <div class="status-bar__element" if.bind="!xmlIsShown">
        <button class="status-bar__show-xml-button" click.delegate="toggleXMLView()">
          <i class="fa fa-file-code-o"></i> Show XML
        </button>
      </div>
      <div class="status-bar__element" if.bind="xmlIsShown">
        <button class="status-bar__show-xml-button" click.delegate="toggleXMLView()">
          <i class="fa fa-file-code-o"></i> Show Diagramm
        </button>
      </div>
    </div>
  </div>
</div>
</template>
