<template>
  <require from="../bpmn-io/bpmn-io"></require>
  <require from="../import-process-button/import-process-button"></require>
  <require from="./processdef-detail.css"></require>
  <require from="spectrum-colorpicker/spectrum.css"></require>
  <require from="../bpmn-xml-view/bpmn-xml-view"></require>
  <require from="../property-panel/property-panel"></require>
  <!--
    MENU BAR
  -->
  <div class="menu-bar menu-bar--system-macos">
    <div class="menu-bar__menu menu-bar__menu--left">
      <div class="menu-bar__menu-action-link">
        <button class="menu-bar__menu-center--action-button menu-bar__menu-center--back-button back-button" click.delegate="goBack()" title="Navigate back">
          <i class="fas fa-arrow-circle-left"></i>
        </button>
      </div>
      <div class="menu-bar__menu-action-link">
        <button class="menu-bar__menu-center--action-button" click.delegate="saveDiagram()" disabled.bind="validationError" title="Save Diagram">
          <i class="fas fa-save"></i>
        </button>
      </div>
      <div class="menu-bar__menu-action-link">
        <button class="menu-bar__menu-center--action-button dropdown-toggle" title="Export Diagram" ref="exportButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i ref="exportIcon" class="fas fa-download"></i>
          <i ref="exportSpinner" class="glyphicon glyphicon-repeat fa-spin hidden"></i>
        </button>
        <ul class="dropdown-menu">
          <li><a href="#" click.delegate="exportBPMN()">as BPMN</a></li>
          <li><a href="#" click.delegate="exportSVG()">as SVG</a></li>
          <li><a href="#" click.delegate="exportPNG()">as PNG</a></li>
          <li><a href="#" click.delegate="exportJPEG()">as JPEG</a></li>
        </ul>
      </div>
      <div class="menu-bar__menu-action-link">
        <import-process-button desired-process-import-key.bind="process.key" callback.bind="onModdlelImported.bind($this)" title="Import Diagram"></import-process-button>
      </div>
      <div class="menu-bar__menu-action-link">
        <button class="menu-bar__menu-center--action-button" click.delegate="startProcess()" disabled.bind="validationError" title="Start Process">
          <i class="fas fa-play"></i>
        </button>
      </div>
    </div>
    <div class="menu-bar__menu menu-bar__menu--center">
      <div class="menu__element btn-group">
        ${process.name}
        <button class="menu-bar__menu-center--action-button dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-angle-down"></i>
        </button>
        <table class="dropdown-menu">
          <tr>
            <th>Process Id: </th>
            <td>${process.id}</td>
          </tr>
          <tr>
            <th>Process Name: </th>
            <td>${process.name}</td>
          </tr>
          <tr>
            <th>Process Key: </th>
            <td>${process.key}</td>
          </tr>
        </table>
      </div>
    </div>
    <div class="menu-bar__menu menu-bar__menu--right">
      <user-login></user-login>
    </div>
  </div>

  <div class="window-layout">
    <!--
      DIAGRAM TOOLS
    -->
    <div class="window-layout__tools-left">
      <div class="tool-list tool-list--vertical">
        <div class="tool">
          <i class="fas fa-mouse-pointer"></i>
        </div>
        <div class="tool btn-group">
          <button class="menu-bar__menu-left--tool dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" click.delegate="updateCustomColors()">
            <i class="fas fa-eye-dropper"></i>
          </button>
          <ul class="dropdown-menu pull-left">
            <li><a click.delegate="setColorRed()"><i class="glyphicon glyphicon-stop red"></i> Red</a></li>
            <li><a click.delegate="setColorBlue()"><i class="glyphicon glyphicon-stop blue"></i> Blue</a></li>
            <li><a click.delegate="setColorGreen()"><i class="glyphicon glyphicon-stop green"></i> Green</a></li>
            <li><a click.delegate="setColorPurple()"><i class="glyphicon glyphicon-stop purple"></i> Purple</a></li>
            <li><a click.delegate="setColorOrange()"><i class="glyphicon glyphicon-stop orange"></i> Orange</a></li>
            <li>
              <a show.bind="colorPickerLoaded" click.delegate="setColorPicked()">
                <input ref="colorPickerFill"></input>
                <input ref="colorPickerBorder"></input>
              </a>
            </li>
            <li><a click.delegate="removeColor()"><i class="glyphicon glyphicon-stop none"></i> None</a></li>
          </ul>
        </div>
        <div class="tool">
          <button class="menu-bar__menu-left--tool dropdown-toggle" title="Distribute Elements Vertically" click.delegate="distributeElementsVertical()">
            <i class="glyphicon glyphicon-object-align-vertical"></i>
          </button>
        </div>
        <div class="tool">
          <button class="menu-bar__menu-left--tool dropdown-toggle" title="Distribute Elements Vertically" click.delegate="distributeElementsHorizontal()">
            <i class="glyphicon glyphicon-object-align-horizontal"></i>
          </button>
        </div>
      </div>
      <div class="tool-list tool-list--vertical tool-list--bottom">
        <div class="tool btn-group">
          <i class="fas fa-sitemap" data-toggle="dropdown"></i>
          <ul class="dropdown-menu">
            <li><a href="#/processdef/${process.id}/process">Show Processes</a></li>
            <li><a href="#/processdef/${process.id}/task">Show Tasks</a></li>
          </ul>
        </div>
        <div class="tool">
          <i class="fas fa-cog"></i>
        </div>
      </div>
    </div>

    <!--
      MAIN CANVAS
    -->
    <div class="window-layout__main js-main">
      <bpmn-io show.bind="!showXMLView" view-model.ref="bpmn" xml.bind="process.xml"></bpmn-io>
    </div>
  </div>
</template>
