<template>
  <require from="./config-panel.css"></require>
  <div class="config-panel">
    <div class="config-panel__title">
      <h1>Settings</h1>
    </div>
    <div class="config-panel__subtitle">
      <h3>ProcessEngine</h3>
    </div>
    <div class="config-panel__panel panel panel-default">
      <label for="processEngineRoute">Base Route</label>
      <input value.bind="baseRoute" type="text" class="form-control" id="processEngineRoute">
      <p class="help-block" if.bind="isLoggedInToProcessEngine">The login session is bound to the current ProcessEngine. Changing the backend route will log you out.</p>
      <div class="config-panel__panel__alert alert alert-info" if.bind="hasInternalProcessEngineBaseRouteSet() && isBaseRouteNotSetToInternalProcessEngine" role="alert">
        <span>
          <i class="fa fa-info-circle" aria-hidden="true"></i>
          An internal ProcessEngine is currently running. Click 
          <a class="use-internal-processengine" click.delegate="setBaseRouteToInternalProcessEngine()">here</a>
          to use the internal ProcessEngine, this will change the Base Route to <code>${internalProcessEngineBaseRoute}</code>.
        </span>
      </div>
    </div>
    <div class="config-panel__subtitle">
      <h3>OpenID Connect</h3>
    </div>
    <div class="config-panel__panel panel panel-default">
      <label for="authority">Authority</label>
      <input value.bind="config.openIdConnect.authority" type="text" class="form-control" id="authority">
    </div>
    <button click.delegate="updateSettings()" class="btn btn-success">Save</button>
    <button click.delegate="cancelUpdate()" class="btn btn-danger">Cancel</button>
  </div>
</template>
